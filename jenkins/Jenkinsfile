pipeline {
    agent {
	dockerfile {
	    dir 'jenkins'
	    args '-v /tmp:/data'
	}
    }

    environment {
       CONAN_USER_HOME = '${env.WORKSPACE}/.conan'
    }


    stages {
	stage('3rd Party Libs') {
	    steps {
		script {
		    sh """
			mkdir -p build
			cd build
			conan remote add bincrafters https://api.bintray.com/conan/bincrafters/public-conan || true
			conan install .. --build missing
			"""
		}
	    }
	}
    }
}
